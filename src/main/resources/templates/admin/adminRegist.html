<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<script src="https://code.jquery.com/jquery-3.7.1.js"
		integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
</head>
<th:block th:replace="~{./include/basicLayout :: setContent(~{::.wrap})}">

	<div class="wrap">
		<div id="main_con">
			<div id="nav_menu">
				<div id="lnb">
					<h2 class="title">사용자 관리</h2>
					<div class="menu">
						<ul>
							<li class="has-sub"><a href="#" title="이용문의 닫기 (열림)">관리자관리</a>
								<ul class="sub" style="display: none;">
									<li><a th:href="@{./../admin/regist}">관리자 등록</a></li>
									<li><a th:href="@{./../admin/list}">관리자 목록</a></li>
								</ul>
							</li>
							<li class="has-sub"><a href="#" title="이용문의 닫기 (열림)">신청자 관리</a>
								<ul class="sub" style="display: none;">
									<li><a th:href="@{./../aplcn/aplcnList}">신청자 명단</a></li>
								</ul>
							</li>
							<li class="has-sub"><a href="#" title="이용문의 닫기 (열림)">재판조력자 관리</a>
								<ul class="sub" style="display: none;">
									<li><a th:href="@{./../fcltt/fclttList}">조력자 등재명단</a>
									</li>
									<li><a th:href="@{./../fcltt/pause}">활동 중지/해제 처리</a></li>
								</ul>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<div id="contents" style="width: 50%; float: left; padding-left: 100px;">
				<div class="heading-wrap container">
					<h3 class="heading1">
						<span style="margin-bottom: 20px;">관리자 등록</span>
					</h3>
					<form action="registForm" name="registForm" id="registForm" method="post">
						<div class="table table-responsive">
							<table>
								<caption>
									관리자 등록
								</caption>
								<colgroup>
									<col style="width: 30%">
									<col style="width: 70%">
								</colgroup>
								<style>
									.btn-style.btn-style11 {
										background: #2065c6;
										height: 40px;
										line-height: 38px;
										border-color: #2065c6;
										font-size: 0.7rem;
										color: white;
									}

									.btn-style.btn-style12 {
										background: #2065c6;
										height: 30px;
										line-height: 30px;
										border-color: #2065c6;
										font-size: 0.7rem;
										color: white;
									}
								</style>
								<tbody>
									<tr style="padding-top: 20px">
										<th scope="row" class="txt-left">
											<span class="essential-txt" title="필수항목"
												style="margin-left: 80px">아이디</span>
										</th>
										<td class="txt-left">
											<div class="address-wrap write-wrap-m">
												<div class="address-btn-wrap">
													<div class="input-wrap">
														<input id="adminid" name="admin_id" class="cm_inptxt" value=""
															title="" type="text" />
													</div>
													<button type="button" class="address-btn" id="checkDuple"> 아이디 중복확인
													</button>
												</div>
												<em id="resultMessage"></em>
											</div>
										</td>
									</tr>
									<tr>
										<th scope="row" class="txt-left">
											<span class="essential-txt" title="" style="margin-left: 80px">비밀번호</span>
										</th>
										<td class="txt-left">
											<div class="input-wrap-three write-wrap-m"
												style="width: 162px; display: inline-block">
												<div class="input-wrap" style="width: 200px">
													<input name="admin_pw" id="password" value="" class="cm_inptxt"
														type="password" />
												</div>
											<input type="checkbox" name="showPw" id="showPw" style="display: inline-block;">
												<label for="showPw">비밀번호 보이기</label>
											</div>
										</td>
									</tr>
									<tr>
										<th scope="row" class="txt-left">
											<span class="essential-txt" title="" style="margin-left: 80px">비밀번호확인</span>
										</th>
										<td class="txt-left">
											<div class="input-wrap-three write-wrap-m"
												style="width: 162px; display: inline-block">
												<div class="input-wrap" style="width: 200px">
													<input id="password-confirm" value="" class="cm_inptxt"
														type="password" />
												</div>
												<span style="color: crimson;" id="password-confirm-message"></span>
											</div>

										</td>
									</tr>
									<tr>
										<th scope="row" class="txt-left">
											<span class="essential-txt" title="" style="margin-left: 80px">관리자 식별</span>
										</th>
										<td class="txt-left">
											<div class="input-wrap-three write-wrap-m"
												style="width: 162px; display: inline-block">
												<div class="input-wrap" style="width: 200px">
													<input name="admin_name" id="cvl_nm" value="" class="cm_inptxt"
														type="text" />
												</div>
											</div>
										</td>
									</tr>

									<tr>
										<th scope="row" class="txt-left">
											<span style="margin-left: 80px">관리자 권한</span>
										</th>
										<style>
											.checkbox-radio-custom>li {
												float: left;
												margin-left: 1rem;
											}
										</style>
										<td class="txt-left">
											<ul class="checkbox-radio-custom write-wrap-m">
												<li>
													<input id="yn_receipt_yes" class="cm_inpchkrd" name="admin_auth"
														type="radio" value="JURIS" />
													<label for="yn_receipt_yes">사법 담당자</label>
												</li>
												<li>
													<input id="" class="cm_inpchkrd" name="admin_auth" type="radio"
														value="COURT" />
													<label for="yn_receipt_no">각급 법원 담당자</label>
												</li>
												<li>
													<input id="" class="cm_inpchkrd" name="admin_auth" type="radio"
														value="COURT" />
													<label for="yn_receipt_no">서비스 관리자</label>
												</li>
											</ul>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</form>
					<style>
						.btn-holder {
							display: flex;
							flex-wrap: wrap;
							justify-content: center;
							max-width: 1000px;
							margin: 30px auto 35px;
						}

						.btn {
							position: relative;
							display: inline-block;
							width: auto;
							height: auto;
							background-color: transparent;
							border: none;
							cursor: pointer;
							margin: 0px 25px 15px;
							min-width: 160px;
						}

						.btn span {
							position: relative;
							display: inline-block;
							font-size: 14px;
							font-weight: bold;
							letter-spacing: 2px;
							top: 0;
							left: 0;
							width: 100%;
							padding: 15px 15px;
							transition: 0.3s;
						}

						.btn-2::before {
							background-color: #4860cc;
							transition: 0.3s ease-out;
						}

						.btn-2 span {
							color: #4860cc;
							border: 1px solid #4860cc;
							transition: 0.2s;
						}
					</style>
					<div class="btn-holder">
						<button class="btn btn-2 hover-opacity" id="registBtn">
							<span>등록</span>
						</button>
						<button class="btn btn-2 hover-opacity">
							<span>취소</span>
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</th:block>
<script>

	$('#password-confirm').on('keyup', function () {
		var password = $('#password').val();
		var passwordConfirm = $(this).val();
		if (password === passwordConfirm) {
			$('#password-confirm-message').removeClass('password-mismatch').text('');
		} else {
			$('#password-confirm-message').addClass('password-mismatch').text('비밀번호가 일치하지 않습니다.');
		}
	});
	//아이디 중복확인

	let checkId = false;

	$("#checkDuple").click(function () {
		const adminid = $("#adminid").val();
		$("#resultMessage").text("");
		$("#validMessage").text("");

		if (adminid == "" || adminid == 'null') {
			alert("아이디를 입력해주세요")
			return;
		}


		$.ajax({
			url: "checkDuplicateUsername",
			method: "POST",
			data: {adminid: adminid},
			success: function (response) {
				console.log(response)
				if (response) {
					$("#resultMessage").text("사용 가능한 아이디입니다.");
					checkId = true;
				} else {
					$("#resultMessage").text("이미 사용 중인 아이디입니다.");
					checkId = false;
				}
			},
			error: function (error) {
				console.error("중복 확인 요청 실패:", error);
			}
		});
	});

	$('#registBtn').click(function (event) {
		// 폼을 제출
		$('#registForm').submit();
	});
	
	$('#showPw').change(()=>{
		togglePasswordVisibility()
	})
	
	function togglePasswordVisibility() {
		var passwordField = document.getElementById("password");
		if (passwordField.type === "password") {
			passwordField.type = "text";
		} else {
			passwordField.type = "password";
		}
	}
</script>

</html>
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<th:block th:replace="~{./include/basicLayout2 :: setContent(~{::.wrap})}">


	<div class="wrap">
		<!-- main_con  -->
		<div id="main_con">
			<div id="contents">

				<style>
					.fclttRegist_btn {
						margin-top: 20px;
						text-align: center;
					}

					.fclttRegist_btn .fcltt_btn1 {
						display: inline-block;
						height: 43px;
						width: 150px;
						border: 1px solid #2065c6;
						border-radius: 5px;
						margin: 5px;
						padding: 10px;
					}

					.fclttRegist_btn>.fcltt_btn1:hover {
						color: black;
						background-color: lightgrey;
						border: none;
					}

					.fclttRegist_btn .fcltt_btn2 {
						height: 44px;
						width: 150px;
						background-color: #2065c6;
						color: white;
						border: 1px solid #2065c6;
						border-radius: 5px;
						margin: 5px;
						padding: 10px;
					}


					.fclttRegist_btn>.fcltt_btn2:hover {
						color: #2065c6;
						background-color: white;
					}

					.transparent-input {
						text-align: center;
						width: 50%;
					}

					.tab-wrap {
						padding-top: 10px;
						text-align: center;
					}
				</style>
				<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
      <![endif]-->


				<article id="detail-content">
					<form name="evaluateForm" action="evaluateForm" method="post">
						<!--<input type="hidden" th:value="${vo.aplcn_dtls_proper_num}">
						<input type="hidden" th:value="${vo.evaluate_proper_num}">
						<input type="hidden" th:value="${vo.admin_proper_num}">-->

						<!--<input type="hidden" name="edctn_dtls_proper_num" value="edctn_dtls_proper_num">-->
						<input type="hidden" name="vo.aplcn_dtls_proper_num" value="vo.aplcn_dtls_proper_num">
						<input type="hidden" name="vo.evaluate_proper_num" value="vo.evaluate_proper_num">
						<input type="hidden" name="admin_proper_num" value="vo.admin_proper_num">

						<div class="heading-wrap container">
							<h3 class="heading1">
								<span>[[${vo.user_name}]] 신청자 평가목록</span>
							</h3>
						</div>

						<div class="contents">

							<!-- 게시판 시작 부분 -->
							<div class="table" style="border-bottom: none;">
								<table>
									<caption>

									</caption>
									<colgroup>
										<col style="width: 25%">
										<col style="width: 25%">
										<col style="width: 25%">
										<col style="width: 25%">
										<col style="width: 25%">
									</colgroup>
									<thead>
										<tr>
											<th scope="col">평가항목</th>
											<th scope="col">점수</th>
											<th scope="col">평가항목</th>
											<th scope="col">점수</th>
											<th scope="col"></th>
										</tr>
									</thead>
									<tbody>

										<tr title="etc" style="cursor: pointer">
											<td data-cell-header="번호">통산경력</td>
											<td data-cell-header="민원서식명" tabindex="0">
												<input type="text" id="input1" class="transparent-input"
													name="all_carer_score">

											</td>
											<td data-cell-header="점수">관내경력</td>
											<td data-cell-header="민원서식명" tabindex="0">
												<input type="text" id="input2" class="transparent-input"
													name="jrsdc_carer_score">
											</td>
										</tr>

										<tr title="etc" style="cursor: pointer">
											<td data-cell-header="번호">사무소 소재지</td>
											<td data-cell-header="민원서식명" tabindex="0">
												<input type="text" id="input3" class="transparent-input"
													name="office_score">
											</td>
											<td data-cell-header="담당법원">인성평가</td>
											<td data-cell-header="민원서식명" tabindex="0">
												<input type="text" id="input4" class="transparent-input"
													name="personality_score">
										</tr>

										<tr title="etc" style="cursor: pointer">
											<td data-cell-header="번호">면접</td>
											<td data-cell-header="민원서식명" tabindex="0">
												<input type="text" id="input5" class="transparent-input"
													name="interview_score">
											</td>
											<td data-cell-header="담당법원">자격증</td>
											<td data-cell-header="민원서식명" tabindex="0">
												<input type="text" id="input6" class="transparent-input"
													name="certificate_score">
											</td>
										</tr>

										<tr title="etc" style="cursor: pointer">
											<td data-cell-header="번호">감정인 평가</td>
											<td data-cell-header="민원서식명" tabindex="0">
												<input type="text" id="input7" class="transparent-input"
													name="evaluate_score">
											<td data-cell-header="담당법원">심사위원 추천</td>
											<td data-cell-header="민원서식명" tabindex="0">
												<input type="text" id="input8" class="transparent-input"
													name="judge_recom_score">
											</td>
										</tr>
									</tbody>
								</table>

								<div class="table">
									<table>
										<tr title="etc" style="cursor: pointer">
											<td class="shifted-td" style="left: 0.5cm" ;>검토 의견</td>
											<td><textarea rows="4" cols="50" style="width: 650px; height: 150px;"
													name="review_etc"></textarea></td>
										</tr>
									</table>
								</div>
								<div class="tab-wrap">
									<strong>
										<div id="result"></div>
									</strong>
								</div>
								<script>
									function completeEvaluation() {
										// 현재 팝업 창에서 메인 페이지로 이동
										window.location.href = "http://localhost:8585/aplcn/aplctDetails"; // 변경할 URL을 입력하세요.
										window.close();
									}
								</script>
								<!-- pagenation -->
								<div class="fclttRegist_btn">
									<!--<button type="button" class="fcltt_btn1"><a onclick="calculateAverage()">평가
											수정하기</a></button>-->
									<button type="submit" class="fcltt_btn2"><a
											onclick="calculateAverageAndSendToParent()">평가완료</button>

								</div>
							</div>
					</form>


					<script th:inline="javascript">
						if ('[[${result}]]' == 1) {
							alert('평가를 완료하였습니다.');
							opener.location.href = '/aplcn/aplcnList';
							self.close();
						} else if ('[[${result}]]' == 0) {
							alert('평가를 완료해주세요')
						}
					</script>

					<script type="text/javascript">
						var evaluateForm = document.getElementById("evaluateForm");
						function calculateAverageAndSendToParent() {
							// 8개의 입력 필드에서 값을 가져옵니다.
							var input1 = Number(document.getElementById("input1").value);
							var input2 = Number(document.getElementById("input2").value);
							var input3 = Number(document.getElementById("input3").value);
							var input4 = Number(document.getElementById("input4").value);
							var input5 = Number(document.getElementById("input5").value);
							var input6 = Number(document.getElementById("input6").value);
							var input7 = Number(document.getElementById("input7").value);
							var input8 = Number(document.getElementById("input8").value);

							// 입력된 값의 유효성을 확인하고, 숫자로 변환한 후 평균값을 계산합니다.
							if (!isNaN(input1) && !isNaN(input2) && !isNaN(input3) && !isNaN(input4) &&
								!isNaN(input5) && !isNaN(input6) && !isNaN(input7) && !isNaN(input8)) {
								var average = (input1 + input2 + input3 + input4 + input5 + input6 + input7 + input8) / 8;

								// 평균값을 부모 창으로 전달합니다.
								if (window.opener && typeof window.opener.handleChildResult === "function") {
									window.opener.handleChildResult(average);

									if (confirm("평가를 저장하시겠습니까?")) {
										evaluateForm.submit();
									}

								} else {
									alert("유효한 숫자를 입력하세요.");
								}
								// 1번부터 8번까지의 입력 필드 중 하나라도 값이 없으면 알림 창을 표시합니다.
								if (!input1 || !input2 || !input3 || !input4 || !input5 || !input6 || !input7 || !input8) {
									alert("1번부터 8번까지의 입력 필드에 값을 모두 입력하세요.");

								}
							}
						}
					</script>

				</article>
			</div>
		</div>
		<!-- //main_con  -->
	</div>

</th:block>

</html>
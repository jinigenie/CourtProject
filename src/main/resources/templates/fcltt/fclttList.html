<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<link rel="stylesheet" th:href="@{../css/fcltt/fcltt.css}" />
	<script th:src="@{../js/fcltt/fcltt.js}"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>


<th:block th:replace="~{./include/basicLayout :: setContent(~{::.wrap})}">

	<div class="wrap">

		<div id="main_con">
			<!--메뉴바-->
			<div id="nav_menu">
				<div id="lnb">
					<h2 class="title">조력자확인</h2>
					<div class="menu">
						<ul>
							<li class="has-sub">
							<li style="display: bolck !important;"><a href="/fcltt/fclttRegist">조력자 등재</a></li>
							<li style="display: bolck !important;"><a href="/fcltt/fclttList">조력자 등재명단</a></li>
							<li style="display: bolck !important;"><a href="/fcltt/pause">조력자 활동신청관리</a></li>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<!-- 메뉴바 여기까지-->
			<!--   본문 contents 내용 시작 -->

			<div id="contents">
				<style>
					@media screen and (max-width: 1024px) {
						.table-responsive>table>tbody>tr td[data-cell-header]:before {
							width: 30%;
							margin: 0 0 0 0;
							vertical-align: unset;
						}
					}
					.table-responsive>table>tbody>tr:hover {
						background-color: #e6f8ff;
					}

					@media screen and (min-width: 1100px) {
						#select-box-margin-left-10 {
							margin-left: 6px;
						}
					}
				</style>

				<article id="detail-content">
					<form id="listForm" name="fcltt_listForm" action="fclttList" method="get">
						<div class="heading-wrap container">
							<h3 class="heading1">
								<span>재판조력자 등재 명단</span>
							</h3>
						</div>
						<!-- 본문컨텐츠 영역 -->
						<div class="container">
							<hr />
							<div class="fclttSearch_wrap">
								<div class="fclttSearch_content">
									<select name="searchCourt" id="fcltt_searchC" class="fclttSearch fclttSearch1">
										<option value="">지역</option>
										<option value="" th:selected="${FclttPageVO.cri.searchCourt == '서울'}">전체</option>
										<option value="서울"  th:selected="${FclttPageVO.cri.searchCourt == '서울'}">서울</option>
										<option value="대전" th:selected="${FclttPageVO.cri.searchCourt == '대전'}">대전</option>
										<option value="대구" th:selected="${FclttPageVO.cri.searchCourt == '대구'}">대구</option>
										<option value="부산" th:selected="${FclttPageVO.cri.searchCourt == '부산'}">부산</option>
										<option value="광주" th:selected="${FclttPageVO.cri.searchCourt == '광주'}">광주</option>
										<option value="수원" th:selected="${FclttPageVO.cri.searchCourt == '수원'}">수원</option>
									</select>
									<input type="text" class="fclttSearch fclttSearch2" name="searchContent" />
									<label class="fclttCheck">
										<select name="searchAct" id="fcltt_searchC" class="fclttSearch fclttSearch1"
											style="width: 120px; margin-bottom: 10px;">
											<option value="" th:selected="${FclttPageVO.cri.searchAct == 'none'}">활동여부</option>
											<option value="Y" th:selected="${FclttPageVO.cri.searchAct == 'Y'}">활동중</option>
											<option value="N" th:selected="${FclttPageVO.cri.searchAct == 'N'}">중지중</option>
										</select>
									</label>
									<a href="#" id="fclttSearch_btn" class="fclttSerch_Btn">조회</a>
									<select name="" id="" class="fclttSearch fclttSearch3">
										<option value="10" th:selected="${FclttPageVO.amount==10}">10개씩 보기</option>
										<option value="20" th:selected="${FclttPageVO.amount==20}">20개씩 보기</option>
										<option value="30" th:selected="${FclttPageVO.amount==30}">30개씩 보기</option>
									</select>
								</div>
							</div>
							<hr />
					</form>
					<!-- 게시판 시작 부분 -->
					<div class="table table-responsive">
						<table>
							<caption>
								번호, 민원서식명, 민원분류, 처리기간, 서식파일, 신청의 대한
								정보 제공
							</caption>
							<colgroup>
								<col style="width: 10%" />
								<col style="width: 20%" />
								<col style="width: 15%" />
								<col style="width: 10%" />
								<col style="width: 15%" />
								<col style="width: 15%" />
								<col style="width: 15%" />
							</colgroup>
							<thead>
								<tr>
									<th scope="col">번호</th>
									<th scope="col">재판조력자분류</th>
									<th scope="col">법원명</th>
									<th scope="col">이름</th>
									<th scope="col">선발날짜</th>
									<th scope="col">상세보기</th>
									<th scope="col">활동여부</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="vo, status : ${list}" title="">
									<td data-cell-header="번호">[[${status.count}]]</td>
									<td data-cell-header="민원서식명">
										[[${vo.trial_fcltt_description}]]
									</td>
									<td data-cell-header="법원명">[[${vo.court_name}]]</td>
									<td data-cell-header="이름">[[${vo.user_name}]]</td>
									<td data-cell-header="날짜">[[${ #temporals.format(vo.accept_date,
										'yyyy-MM-dd')}]]</td>
									<td class="modal_ajax">
										<a class="fcltt_content" style="cursor: pointer"><em>상세보기</em></a>
										<input type="hidden" name="accept_proper_num"
											th:value="${vo.accept_proper_num}" />
									</td>
									<td>
										<a th:class="${vo.accept_act_yn == 'Y' ? 'fclttStatus1' : 'fclttStatus2'}">
											<em th:text="${vo.accept_act_yn == 'Y' ? '활동중' : '중지중'}"></em>
										</a>
									</td>
								</tr>

							</tbody>
						</table>
					</div>

					<!-- pagenation -->
					<!-- 페이지네이션 부분 -->
					<div class="pager">
						<div class="pager-wrap">
							<!-- 처음 페이지로 이동 -->
							<a th:if="${FclttPageVO.pageList.size() > 1}" th:href="@{fclttList(page=1,
                                amount=${FclttPageVO.amount}, 
                                searchCourt=${FclttPageVO.cri.searchCourt}, 
                                searchCourtName=${FclttPageVO.cri.searchCourtName},
                                searchAct=${FclttPageVO.cri.searchAct}, 
                                searchDate=${FclttPageVO.cri.searchDate}, 
                                searchContent=${FclttPageVO.cri.searchContent})}">
								<strong class="sr-only">맨 처음 목록으로 이동</strong>
							</a>
							<!-- 이전 페이지로 이동 -->
							<th:block th:if="${FclttPageVO.pageList.size() > 1 and FclttPageVO.prev}">
								<a th:href="@{fclttList(page=${FclttPageVO.start-1}, 
                                    amount=${FclttPageVO.amount}, 
                                    searchCourt=${FclttPageVO.cri.searchCourt}, 
                                    searchCourtName=${FclttPageVO.cri.searchCourtName}, 
                                    searchAct=${FclttPageVO.cri.searchAct}, 
                                    searchDate=${FclttPageVO.cri.searchDate}, 
                                    searchContent=${FclttPageVO.cri.searchContent})}">
									<strong class="sr-only">이전페이지로 이동</strong>
								</a>
							</th:block>
							<!-- 페이지 번호를 반복적으로 생성하는 부분 -->
							<th:block th:each="page : ${FclttPageVO.pageList}">
								<a th:href="@{fclttList(page=${page}, 
                                    amount=${FclttPageVO.amount}, 
                                    searchCourt=${FclttPageVO.cri.searchCourt}, 
                                    searchCourtName=${FclttPageVO.cri.searchCourtName}, 
                                    searchAct=${FclttPageVO.cri.searchAct}, 
                                    searchDate=${FclttPageVO.cri.searchDate}, 
                                    searchContent=${FclttPageVO.cri.searchContent})}"
									th:class="${page == FclttPageVO.page ? 'active' : ''}">
									[[${page}]]
								</a>
							</th:block>
							<!-- 다음 페이지로 이동 -->
							<th:block th:if="${FclttPageVO.pageList.size() > 1 and FclttPageVO.next}">
								<a th:href="@{fclttList(page=${FclttPageVO.end + 1}, 
                                    amount=${FclttPageVO.amount}, 
                                    searchCourt=${FclttPageVO.cri.searchCourt}, 
                                    searchCourtName=${FclttPageVO.cri.searchCourtName}, 
                                    searchAct=${FclttPageVO.cri.searchAct}, 
                                    searchDate=${FclttPageVO.cri.searchDate}, 
                                    searchContent=${FclttPageVO.cri.searchContent})}">
									<strong class="sr-only">다음페이지로 이동</strong>
								</a>
							</th:block>
							<!-- 맨 마지막 페이지로 이동 -->
							<a th:if="${FclttPageVO.pageList.size() > 1}" th:href="@{fclttList(page=${FclttPageVO.realEnd}, 
                                amount=${FclttPageVO.amount}, 
                                searchCourt=${FclttPageVO.cri.searchCourt}, 
                                searchCourtName=${FclttPageVO.cri.searchCourtName}, 
                                searchAct=${FclttPageVO.cri.searchAct}, 
                                searchDate=${FclttPageVO.cri.searchDate}, 
                                searchContent=${FclttPageVO.cri.searchContent})}">
								<strong class="sr-only">맨 마지막목록으로 이동</strong>
							</a>
						</div>
					</div>
				</article>
			</div>
			<!--모달창 작업-->
			<div id="popup_layer2">
				<div class="popup_box2">
					<!--모달 컨텐츠 영역-->
				</div>
			</div>
		</div>
		<!-- //본문컨텐츠 영역 -->
	</div>
	<!-- //main_con  -->




</th:block>


<script th:inline="javascript">
	document.addEventListener("DOMContentLoaded", function () {
		var modalAjaxElements = document.querySelectorAll(".fcltt_content");
		modalAjaxElements.forEach(function (element) {
			element.addEventListener("click", function () {
				var closestTr = this.closest("tr");
				var accept_proper_num = closestTr.querySelector("input[name='accept_proper_num']").value;
				console.log(accept_proper_num);

				var xhr = new XMLHttpRequest();
				xhr.open("POST", "getfclttModal", true);
				xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

				xhr.onreadystatechange = function () {
					if (xhr.readyState === 4 && xhr.status === 200) {
						var fclttData = JSON.parse(xhr.responseText);

						var modal = document.getElementById("popup_layer2");
						modal.style.display = "block";

						var str = "";
						str = '<div class="popup_cont2">';
						str += '<div class="popup_cont2_title">';
						str += '<p>조력자 상세정보</p></div>';
						str += '<div class="popup_contText">';
						str += '<h3 id="fcltt_h3"> 재판조력자</h3>';
						str += '<h2 id="fcltt_h2">' + fclttData.user_name + '</h2>';
						str += '<p id="fcltt_p_right">등재번호: ' + fclttData.accept_proper_num + '</p></div>';
						str += '<div class="fcltt_wrap"><div class="fcltt_wrap_top">';
						str += '<table><colgroup><col style="width: 30%"><col style="width: 70%"></colgroup>';
						str += '<tbody>';
						str += '<tr><th scope="row" class="fclttSpan_wrap txt-left"><span class="fclttSpan txt-left" title="">재판조력자분류</span>';
						str += '</th><td data-cell-header="성" class="fclttSpan_wrap txt-left">';
						str += '<span class="fclttSpan txt-left">' + fclttData.trial_fcltt_clasifi_code + ' > ' + fclttData.trial_fcltt_description + '</span></td></tr>';
						str += '<tr><th scope="row" class="fclttSpan_wrap txt-left"><span class="fclttSpan txt-left" title="">신청법원</span>'
						str += '</th><td data-cell-header="성" class="fclttSpan_wrap txt-left">';
						str += '<span class="fclttSpan txt-left">' + fclttData.court_region + ' > ' + fclttData.court_name + '</span></td></tr>';
						str += '<tr><th scope="row" class="fclttSpan_wrap txt-left"><span class="fclttSpan txt-left" title="">소송사건 유무내역</span>';
						str += '</th><td data-cell-header="성" class="fclttSpan_wrap txt-left">';
						str += '<span class="fclttSpan txt-left"> </span></td></tr>';
						str += '</tbody ></table ></div >';
						str += '<div class="fcltt_popup_wrap">';
						str += '<table class="fcltt_popup_content">';
						str += '<colgroup><col style="width: 30%"><col style="width: 70%"></colgroup>';
						str += '<tbody id="fcltt_detail_bottom"><tr><th scope="row" class="txt-left">';
						str += '<span class="fclttSpan_title txt-left" title="">학력 상세 정보</span></th>';
						str += '<td data-cell-header="성명" class="txt-left">';
						str += '<span class="fclttSpan2 txt-left"></span></td></tr>';
						str += '<tr><th scope="row" class="txt-left"><span class="fclttSpan1 txt-left" title="txt-left">학교이름</span></th>';
						str += '<td data-cell-header="성명" class="txt-left">';
						str += '<span class="fclttSpan2 txt-left">' + fclttData.edctn_school_name + '</span></td></tr>';
						str += '<tr><th scope="row" class="txt-left"><span class="fclttSpan1 txt-left" title="txt-left">학과전공</span></th>';
						str += '<td data-cell-header="성명" class="txt-left"><span class="fclttSpan2 txt-left">' + fclttData.edctn_major + '</span></td></tr>';
						str += '<tr><th scope="row" class="txt-left"><span class="fclttSpan1 txt-left" title="txt-left">학위</span></th>';
						str += '<td data-cell-header="성명" class="txt-left"><span class="fclttSpan2 txt-left">' + fclttData.edctn_degree + '</span></td></tr></tbody>';
						str += '<!-- 경력 상세 --><tbody id="fcltt_detail_bottom" style="margin-top: 20px;">';
						str += '<tr><th scope="row" class="txt-left"><span class="fclttSpan_title txt-left" title=""> 경력 상세 정보</span></th>';
						str += '<td data-cell-header="성명" class="txt-left"><span class="fclttSpan2 txt-left"></span></td></tr>';
						str += '<tr><th scope="row" class="txt-left"><span class="fclttSpan1 txt-left" title="txt-left">회사명/활동기관명</span></th>';
						str += '<td data-cell-header="성명" class="txt-left"><span class="fclttSpan2 txt-left">' + fclttData.company_name + '</span></td></tr>';
						str += '<tr><th scope="row" class="txt-left"><span class="fclttSpan1 txt-left" title="txt-left">경력구분</span></th>';
						str += '<td data-cell-header="성명" class="txt-left"><span class="fclttSpan2 txt-left">' + fclttData.carer_type + '</span></td></tr></tbody>';
						str += '<tbody id="fcltt_detail_bottom">';
						str += '<tr><th scope="row" class="txt-left"><span class="fclttSpan_title txt-left" title=""> 자격증 상세 정보</span></th>';
						str += '<td data-cell-header="성명" class="txt-left"><span class="fclttSpan2 txt-left"></span></td></tr>';
						str += '<tr><th scope="row" class="txt-left"><span class="fclttSpan1 txt-left" title="txt-left">자격증명1</span></th>';
						str += '<td data-cell-header="성명" class="txt-left"><span class="fclttSpan2 txt-left">' + fclttData.crtfc_type + '</span></td></tr>';
						str += '</tbody></table></div></div></div>';
						str += '<div class="popup_btn2"><a href="javascript:closePop2();">닫기</a></div></div>';

						var popupBox = document.querySelector('.popup_box2');
						popupBox.innerHTML = str;
						     window.scrollTo(0, 0);
					}
				};

				xhr.send("accept_proper_num=" + accept_proper_num);
			});
		});
	});
</script>



<script th:inline="javascript">

	var fclttSearch_btn = document.getElementById("fclttSearch_btn");
	fclttSearch_btn.onclick = function () {
		event.preventDefault(); // a 태그 중지버튼
		document.fcltt_listForm.submit();
	}



</script>












</html>